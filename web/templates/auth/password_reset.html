{% extends "layout/base_auth.html" %}
{% load static %}

{% block page_title %}Recuperación de contraseña{%endblock page_title %}

{% block main_content %}

<section
	class="crancy-wc crancy-wc__full crancy-bg-cover"
	style="background-image: url('{% static "img/credential-bg.svg" %}')"
>
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="crancy-wc__form">

					{% comment %} Img + form {% endcomment %}
					<div class="crancy-wc__form--middle">

						{% comment %} img {% endcomment %}
						<div class="crancy-wc__banner d-flex flex-column justify-content-center align-items-center">
							<div class="mt-5 pt-3 ">
								<h3 class="text-center">Intranet Cuerpo <br> de Bomberos de Puente Alto</h3>
							</div>

							<img src="{% static "images/logo-cbpa.png" %}" class="w-50 mt-3" />
							
						</div>

						{% comment %} Form {% endcomment %}
						<div class="crancy-wc__form-inner">

							<div class="crancy-wc__heading">
								<h3
									class="crancy-wc__form-title crancy-wc__form-title__one"
								>
									Crea tu nueva contraseña
								</h3>
								<p>Escribe tu nueva contraseña.</p>
							</div>
							
							{% comment %} Successful message {% endcomment %}
							{% if successful_message %}
							<div class="alert alert-success d-flex align-items-center mt-5" role="alert">
								<svg xmlns="http://www.w3.org/2000/svg" width="3em" height="3em" viewBox="0 0 24 24"><path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4l-8 5l-8-5V6l8 5l8-5z"/></svg>
								<div>
								  	{{ successful_message}}
								</div>
							</div>
							{% endif %}

							<form
								class="crancy-wc__form-main"
								method="post"
							>
							{% csrf_token %}

							{% comment %} Error message {% endcomment %}
							{% if error_message %}
							<div class="alert alert-danger d-flex align-items-center mt-5" role="alert">
								<svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 24 24"><path fill="currentColor" d="M12 17q.425 0 .713-.288T13 16t-.288-.712T12 15t-.712.288T11 16t.288.713T12 17m-1-4h2V7h-2zm1 9q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"/></svg>
								<div>
								  	{{ error_message}}
								</div>
							</div>
							{% endif %}

							<form
								class="crancy-wc__form-main"
								method="post"
							>
							{% csrf_token %}
								
								{% comment %} New password {% endcomment %}
								<div class="form-group">
									<div class="form-group__input">
										<input
											class="crancy-wc__form-input"
											id="password-field"
											type="password"
											name="txtNewPassword"
											required="required"
										/>
										<span class="crancy-wc__toggle">
											<i
												class="fas fa-eye"
												id="toggle-icon"
											></i>
										</span>
									</div>
								</div>

								{% comment %} Confirm password {% endcomment %}
								<div class="form-group">
									<div class="form-group__input">
										<input
											class="crancy-wc__form-input"
											id="password-field"
											type="password"
											name="txtConfirmPassword"
											required="required"
										/>
										<span class="crancy-wc__toggle">
											<i
												class="fas fa-eye"
												id="toggle-icon"
											></i>
										</span>
									</div>
								</div>
								
								{% comment %} Submit {% endcomment %}
								<div class="form-group form-mg-top25">
									<div class="crancy-wc__button">
										<button
											class="ntfmax-wc__btn"
											type="submit"
										>
											Crear nueva contraseña
										</button>
									</div>
								</div>

							</form>

						</div>

					</div>

					{% comment %} Footer {% endcomment %}
					<div class="crancy-wc__footer--top">
						<p class="crancy-wc__footer--copyright text-dark text-center mt-5">
							<span id="current-year"></span> &copy; Cuerpo de Bomberos de Puente Alto.
						</p>
						<p class="crancy-wc__footer--copyright text-dark text-center mt-0">Desarrollado por JR Digital.</p>
					</div>

				</div>
			</div>
		</div>
	</div>
</section>

<script>
	let currentYear = new Date().getFullYear();
	document.getElementById("current-year").innerHTML = currentYear;
</script>

{% endblock main_content %}
